# Хлебушек бот

Я написал ботика, который будет хорошим компаньоном в группах и чатиках для абсолютно-любого контингента.

Имя этому боту: Хлебушек. Название исходит из игры слов: "Смышленый как хлебушек" или от английского "bread", что на
русском звучит как "Бред". Ботик бредует, матерится и слепо делает то, чему его научили юзеры.

Ссылка на бота: [https://t.me/bread_hleb_bot]()

### Начало работы с ботом:

1) Добавить бота в чат/Просто открыть с ним личные сообщения

2) Написать "Хлеб хелп" и получить всю информацию о функционале.

3) Начать пользоваться и настраивать его.

### Терминология:

- **Обращение к боту** - вызвать бота с помощью ключевых слов "Хлеб" и "Хлебушек"
- **Команда** - основная функция бота, обычно следует после обращения к боту.
- **Параметр команды** - Некоторые команды требуют дополнительных данных для выполнения, для этого необходимо их
  указывать и дополнять контекст боту.
- **Триггер** - любое сообщение в чате, на которое будет реагировать бот.
- **Подстрока** - кусок строки в сообщении чата, на которое будет реагировать бот.
- **Сообщения от бота** - его ответы и реакции на сообщения
- **Reply** - Бот видит и контент сообщения, на который отвечает пользователь и может из него брать автора\текст\контент.
- **Чат** - Чат, в котором находится бот. Это может быть как группа, так и ЛС с ботом. 
- **Пользователь** - Это ты, уважаемый читатель, либо те, те люди, кто состоит в группе и которых видит бот.

###Реагирование бота:

- Бота можно вызвать с помощью двух ключевых слов: "Хлеб" и "Хлебушек"
- Бот может триггериться на слова в чате, на голосовые сообщения, на редактирование сообщений, если настроить его на
  данные события.
- Возможно, скоро бот будет уметь по расписанию что-то отправлять или напоминать пользователям.

###Конструкции вызова бота:

- Хлеб [команда] [параметр команды]
    - Хлеб кто самый лучший?
    - Хлеб выбери Италия или Испания.

- Хлеб [команда]
    - Хлеб цитата.

- Хлеб [команда] [объект] [ключевое значение]=[ответ]
    - Хлеб добавь триггер хабр=habr.ru

###Механика бота

- Бот запоминает всё и много рандомит из того, что запомнил. Например, если дать боту запомнить триггер или подстроку
  всего одним ответом, то он будет выдавать только один ответ. А если дать ему запомнить еще один вариант - он добавит
  его к себе в коллекцию, сохранив старый ответ. И теперь он будет рандомить между двумя значениями.
- Бот для каждого чата хранит собственные привязки, триггеры и подстроки. Если что-то настроили в личных сообщениях с
  ботом - дальше лички это не уйдет. Если что-то настроили в своей группе - дальше группы не уйдет.
- Иногда хочется добавить всё, что настроил в личке в определенную группу. Этого можно добиться с помощью функции "
  Распространи в". Но это только возможно для тех чатов, где пользователь сам является участником этого чата. В чужие
  чаты распространять свои настройки не выйдет - я запретил :)
- Управлять ботом и вызывать бота могут все участники группы. К сожалению, для команд "Кто", "У кого" и "Топ" бот видит
  в чате только администраторов группы. Это политика безопасности Telegram, тут я бессилен. Чтобы бот видел всех - надо
  всех сделать админами.
- Бот не тегает пользователей, если у них есть имя и фамилия в профиле - он использует их. А если имени и фамилии нет -
  бот будет каждый раз тегать пользователя по его username.

###Основные команды

- `Шанс/Вероятность [Параметр команды]` - Бот выдаст рандомный процент вероятности события, указанного в параметрах.

        > Хлебушек вероятность выхода нового сезона сериала?
        > Есть вероятность выхода нового сезона сериала - 92%

- `Кто/У кого [Параметр команды]` - Бот выберет рандомного участника группы, который подходит под указанный параметр.

        > Хлеб кто самый классный?
        > Вероятно самый классный - это UserFirstName UserLastName

- `Топ [Параметр команды]` - Бот составит топ-лист из участников группы, которые подходят под указанный параметр.

        > Хлеб топ бездельников
        > Топ бездельников:
            1) Alexandr Ivanov 
            2) Ivan Alexandrov
            3) Andrey Alexeev
            4) Alexey Andreev

- `Рандом` - Бот сгенерирует рандомное число
- `Редактирование` - Бот включает или выключает реакцию на редактирование сообщений пользователями
- `Голосовые` - Бот включает или выключает реакцию на голосовые сообщения
-` Выбери [Параметр команды 1] или [Параметр команды 2] [Параметр команды N] / Выбери [Параметр команды 1]
  , [Параметр команды 2], [Параметр команды N]` - Бот выбирает один из перечисленных параметров рандомно.
        
        > Хлеб выбери IOS, Android, Window Phone
        > IOS
        > Хлеб выбери IOS или Android
        > Android

- `Добавь [объект] [Ключ]=[Значение]` - Бот добавляет объект (триггер, ответ, оскорбление или подстроку) в общий
  словарь для чата.

        User:> Хлеб добавь триггер Привет=Медвед
        Bot:> Сделал
        User:> привет
        Bot:> Медвед
        ****
        User:> Хлеб добавь подстроку шоколад=я не люблю шоколад, я бот
        Bot:> Сделал
        User:> что ты думаешь про шоколад?
        Bot:> я не люблю шоколад, я бот


- `Удали [объект] [ключ]` или `Удали [объект]=[значение]` - Бот удаляет (триггер, ответ, оскорбление или подстроку) из общего словаря
  для чата. Если использовать только ключ - удалит всё, что связанно с ключевым значением. А если указать ключ и значение, то будет удалено только указанное значение из ключевой фразы
        
        # яблоко=[Это вкусный продукт, Упало на Ньютона]
        User:> Хлеб удали триггер Яблоко=Это вкусный продукт
        Bot:> Сделал
        # яблоко = [Упало на Ньютона]
        ***
        # огонь = ["Горит ярко", "Печет сильно"]
        User:> Хлеб удали триггер огонь
        Bot:> Сделал
        # ключа триггера "огонь" не существует

- `Покажи [объект]` - Бот показывает (триггер, ответ, оскорбление или подстроку) из словаря чата списком, без
  значений.

        User:> Хлеб покажи подстроки
        Bot:> 
        test=[1; 2; foo; bar]
        привет=[Здравствуйте]
        яблоко=[Упало на Ньютона; Это вкусный продукт]


- `Цит` или `Цитата` - Бот присылает крылатые фразы, с которых пользователи могут либо подчерпнуть мудрости, либо
  хорошенько метаиронично порофлить

        User:> Хлеб цитата
        Bot:> Вы должны поверить в свою исключительность прежде, чем сможете стать исключительным. 
        © Робин Шарма


- `Стата` - Бот отдаст статистику по текущему чату

- `Распространи в [Параметр команды]` - Бот копирует все привязки, триггеры и подстроки в указанный чат. Работает только в
  ЛС с ботом.

        User:> Хлеб распространи в МойЧат
        Bot:> Сделал

- `Оскорби` - Необходимо выбрать в reply сообщение автора, которого необходимо оскорбить, после команды начнет выдавать рандомным образом оскорбления из базы. Если выбирать сообщение, то бот тегает жертву-автора, а если не выбирать - не тегает.

- `Insult` - Англоязычная версия команды `Оскорби`

- `Запомни как [ключ\значение] [параметр]` или `Запомни [ключ\значение] [параметр]` - Необходимо выбрать в reply сообщение, контент которого необходимо запомнить как ключ или значение к указанному параметру.
      
        message1: MyValue
        message2 [взят в reply message1]: Хлеб запомни как значение MyKey
        # MyKey: [MyValue]
        ***
        message1: MyKey
        message2 [взят в reply message1]: Хлеб запомни как ключ MyCustomValue
        # MyKey: [MyCustomValue]


### Хлебное спасибо за внимание. Пользуйтесь на здоровье.

